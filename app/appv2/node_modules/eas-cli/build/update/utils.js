"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatUpdate = exports.getPlatformsForGroup = exports.UPDATE_COLUMNS = void 0;
const tslib_1 = require("tslib");
const timeago_js_1 = require("@expo/timeago.js");
const User_1 = require("../user/User");
const groupBy_1 = (0, tslib_1.__importDefault)(require("../utils/expodash/groupBy"));
exports.UPDATE_COLUMNS = [
    'Update message',
    'Update runtime version',
    'Update group ID',
    'Update platforms',
];
function getPlatformsForGroup({ group, updates, }) {
    const groupedUpdates = (0, groupBy_1.default)(updates, update => update.group);
    if (Object.keys(groupedUpdates).length === 0) {
        return 'N/A';
    }
    return groupedUpdates[group]
        .map(update => update.platform)
        .sort()
        .join(', ');
}
exports.getPlatformsForGroup = getPlatformsForGroup;
function formatUpdate(update) {
    if (!update) {
        return 'N/A';
    }
    const message = update.message ? `"${update.message}" ` : '';
    return `${message}(${(0, timeago_js_1.format)(update.createdAt, 'en_US')} by ${(0, User_1.getActorDisplayName)(update.actor)})`;
}
exports.formatUpdate = formatUpdate;
